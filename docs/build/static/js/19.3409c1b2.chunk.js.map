{"version":3,"sources":["components/layout/layout-setting/SettingPage.jsx"],"names":["options","value","label","themeOptions","LayoutSetting","props","useState","code","setCode","layout","labelCol","flex","fitHeight","style","display","flexDirection","marginBottom","type","message","color","initialValues","CONFIG_HOC","onValuesChange","changedValues","values","storage","local","setItem","CONFIG_HOC_STORAGE_KEY","Object","entries","forEach","key","layoutRef","current","refresh","json5","stringify","replace","name","LAYOUT_TYPE","SIDE_MENU","TOP_MENU","TOP_SIDE_MENU","span","shouldUpdate","noStyle","getFieldValue","overflow","borderTop","padding","background"],"mappings":"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","file":"static/js/19.3409c1b2.chunk.js","sourcesContent":["import {useState} from 'react';\nimport {Form, Row, Col, Alert} from 'antd';\nimport {FormItem, LAYOUT_TYPE, PageContent} from '@ra-lib/components';\nimport json5 from 'json5';\nimport {storage} from 'src/commons';\nimport {CONFIG_HOC_STORAGE_KEY, CONFIG_HOC} from 'src/config';\nimport {layoutRef} from 'src/components/layout';\n\nconst options = [\n    {value: true, label: '是'},\n    {value: false, label: '否'},\n];\n\nconst themeOptions = [\n    {value: 'default', label: '亮'},\n    {value: 'dark', label: '暗'},\n];\n\nexport default function LayoutSetting(props) {\n    const [code, setCode] = useState('');\n\n    function handleChange(changedValues, values) {\n        storage.local.setItem(CONFIG_HOC_STORAGE_KEY, values);\n\n        Object.entries(values)\n            .forEach(([key, value]) => CONFIG_HOC[key] = value);\n\n        layoutRef.current?.refresh && layoutRef.current.refresh();\n        let code = json5.stringify(values, null, 4) || '';\n        code = code.replace(`layoutType: 'side-menu'`, `layoutType: LAYOUT_TYPE.SIDE_MENU`);\n        code = code.replace(`layoutType: 'top-menu'`, `layoutType: LAYOUT_TYPE.TOP_MENU`);\n        code = code.replace(`layoutType: 'top-side-menu'`, `layoutType: LAYOUT_TYPE.TOP_SIDE_MENU`);\n        setCode(code);\n\n        // 延迟触发window 的 resize事件调整布局\n        // setTimeout(() => window.dispatchEvent(new Event('resize')));\n    }\n\n    const layout = {\n        labelCol: {flex: '100px'},\n    };\n\n    return (\n        <PageContent fitHeight style={{display: 'flex', flexDirection: 'column'}}>\n            <div style={{flex: 0}}>\n                <Alert\n                    style={{marginBottom: 24}}\n                    type=\"warning\"\n                    message={\n                        <div style={{color: 'red'}}>\n                            不推荐将设置开放给用户，选择好了之后，复制代码到项目配置文件 src/config/index.js 中\n                        </div>\n                    }\n                />\n                <Form\n                    initialValues={CONFIG_HOC}\n                    onValuesChange={handleChange}\n                >\n                    <FormItem\n                        {...layout}\n                        type=\"radio-button\"\n                        label=\"布局方式\"\n                        name=\"layoutType\"\n                        options={[\n                            {value: LAYOUT_TYPE.SIDE_MENU, label: '左侧菜单'},\n                            {value: LAYOUT_TYPE.TOP_MENU, label: '头部菜单'},\n                            {value: LAYOUT_TYPE.TOP_SIDE_MENU, label: '头部 + 左侧菜单'},\n                        ]}\n                    />\n                    <FormItem\n                        {...layout}\n                        type=\"radio-button\"\n                        label=\"Logo主题\"\n                        name=\"logoTheme\"\n                        options={themeOptions}\n                    />\n                    <Row>\n                        <Col span={6}>\n                            <FormItem\n                                {...layout}\n                                type=\"radio-button\"\n                                label=\"左侧\"\n                                name=\"side\"\n                                options={options}\n                            />\n                        </Col>\n                        <FormItem shouldUpdate noStyle>\n                            {({getFieldValue}) => {\n                                const side = getFieldValue('side');\n                                if (!side) return null;\n                                return (\n                                    <>\n                                        <Col span={6}>\n                                            <FormItem\n                                                {...layout}\n                                                type=\"radio-button\"\n                                                label=\"菜单保持打开\"\n                                                name=\"keepMenuOpen\"\n                                                options={options}\n                                            />\n                                        </Col>\n                                        <Col span={6}>\n                                            <FormItem\n                                                {...layout}\n                                                type=\"radio-button\"\n                                                label=\"左侧主题\"\n                                                name=\"sideTheme\"\n                                                options={themeOptions}\n                                            />\n                                        </Col>\n                                        <Col span={6}>\n                                            <FormItem\n                                                {...layout}\n                                                type=\"radio-button\"\n                                                label=\"菜单搜索\"\n                                                name=\"searchMenu\"\n                                                options={options}\n                                            />\n                                        </Col>\n                                    </>\n                                );\n                            }}\n                        </FormItem>\n                    </Row>\n                    <Row>\n                        <Col span={6}>\n                            <FormItem\n                                {...layout}\n                                type=\"radio-button\"\n                                label=\"头部\"\n                                name=\"header\"\n                                options={options}\n                            />\n                        </Col>\n                        <FormItem shouldUpdate noStyle>\n                            {({getFieldValue}) => {\n                                const header = getFieldValue('header');\n                                if (!header) return null;\n                                return (\n                                    <>\n                                        <Col span={6}>\n                                            <FormItem\n                                                {...layout}\n                                                type=\"radio-button\"\n                                                label=\"头部收起菜单\"\n                                                name=\"headerSideToggle\"\n                                                options={options}\n                                            />\n                                        </Col>\n                                        <Col span={6}>\n                                            <FormItem\n                                                {...layout}\n                                                type=\"radio-button\"\n                                                label=\"头部主题\"\n                                                name=\"headerTheme\"\n                                                options={themeOptions}\n                                            />\n                                        </Col>\n                                    </>\n                                );\n                            }}\n                        </FormItem>\n                    </Row>\n                    <Row>\n                        <Col span={6}>\n                            <FormItem\n                                {...layout}\n                                type=\"radio-button\"\n                                label=\"Tab页\"\n                                name=\"tab\"\n                                options={options}\n                            />\n                        </Col>\n                        <FormItem shouldUpdate noStyle>\n                            {({getFieldValue}) => {\n                                const tab = getFieldValue('tab');\n                                if (!tab) return null;\n                                return (\n                                    <>\n                                        <Col span={6}>\n                                            <FormItem\n                                                {...layout}\n                                                type=\"radio-button\"\n                                                label=\"Tab持久化\"\n                                                name=\"persistTab\"\n                                                options={options}\n                                            />\n                                        </Col>\n                                        <Col span={6}>\n                                            <FormItem\n                                                {...layout}\n                                                type=\"radio-button\"\n                                                label=\"Tab收起菜单\"\n                                                name=\"tabSideToggle\"\n                                                options={options}\n                                            />\n                                        </Col>\n                                        <Col span={6}>\n                                            <FormItem\n                                                {...layout}\n                                                type=\"radio-button\"\n                                                label=\"Tab额外头部\"\n                                                name=\"tabHeaderExtra\"\n                                                options={options}\n                                            />\n                                        </Col>\n                                    </>\n                                );\n                            }}\n                        </FormItem>\n                    </Row>\n                    <FormItem\n                        {...layout}\n                        type=\"radio-button\"\n                        label=\"页面头部\"\n                        name=\"pageHeader\"\n                        options={options}\n                    />\n                </Form>\n            </div>\n            <code style={{\n                flex: 1,\n                overflow: 'auto',\n                borderTop: '1px solid #e8e8e8',\n                padding: 16,\n                background: '#000',\n            }}>\n                <pre style={{color: '#fff'}}>\n                    {code}\n                </pre>\n            </code>\n        </PageContent>\n    );\n}\n"],"sourceRoot":""}